<UserControl x:Class="VisualHFT.Studies.Template.UserControls.PluginSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:VisualHFT.Studies.Template.UserControls"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="400">
    <Grid Margin="10">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Basic Settings -->
                <Label Content="Provider" FontWeight="Bold" Margin="0,10,0,0"/>
                <ComboBox Margin="0,5"
                          ItemsSource="{Binding Path=Providers}" 
                          SelectedItem="{Binding SelectedProvider, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}" 
                          DisplayMemberPath="ProviderName" FontSize="14" />

                <Label Content="Symbol" FontWeight="Bold" Margin="0,10,0,0"/>
                <ComboBox FontSize="14" Margin="0,5"
                          ItemsSource="{Binding Symbols}" 
                          SelectedItem="{Binding SelectedSymbol, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"/>

                <Label Content="Aggregation" FontWeight="Bold" Margin="0,10,0,0"/>
                <ComboBox ItemsSource="{Binding AggregationLevels}" Margin="0,5"
                          DisplayMemberPath="Item1" 
                          SelectedValuePath="Item2" 
                          SelectedValue="{Binding AggregationLevelSelection, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}" 
                          FontSize="14"/>
                
                <!-- Study-specific Settings -->
                <Separator Margin="0,20,0,10"/>
                <Label Content="Study Parameters" FontWeight="Bold" FontSize="16"/>
                
                <Label Content="Time Period (ms)" Margin="0,10,0,0"/>
                <TextBox Text="{Binding TimePeriodMs, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                         FontSize="14" Margin="0,5"/>
                
                <Label Content="Min Volume Threshold"/>
                <TextBox Text="{Binding MinVolumeThreshold, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                         FontSize="14" Margin="0,5"/>
                
                <!-- Alert Settings -->
                <Separator Margin="0,20,0,10"/>
                <Label Content="Alert Settings" FontWeight="Bold" FontSize="16"/>
                
                <CheckBox Content="Enable Alerts" 
                          IsChecked="{Binding EnableAlerts}" 
                          FontSize="14" Margin="0,5"/>
                
                <Label Content="Alert Threshold"/>
                <TextBox Text="{Binding AlertThreshold, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                         FontSize="14" Margin="0,5"/>
                
                <!-- Custom Parameters -->
                <Separator Margin="0,20,0,10"/>
                <Label Content="Custom Parameters" FontWeight="Bold" FontSize="16"/>
                
                <Label Content="Custom Parameter 1 (Double)"/>
                <TextBox Text="{Binding CustomParameter1, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                         FontSize="14" Margin="0,5"/>
                
                <Label Content="Custom Parameter 2 (Integer)"/>
                <TextBox Text="{Binding CustomParameter2, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                         FontSize="14" Margin="0,5"/>
                
                <!-- Buttons -->
                <Separator Margin="0,20,0,10"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10">
                    <Label Content="{Binding ValidationMessage}" Foreground="Red" 
                           HorizontalAlignment="Left" Margin="0 0 20 0" VerticalAlignment="Center" />
                    <Button Content="OK" Command="{Binding OkCommand}" Margin="0,0,5,0" Width="80" Height="30" />
                    <Button Content="Cancel" Command="{Binding CancelCommand}" Width="80" Height="30" />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
